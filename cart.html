<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Cart</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="ICON" href="images/logo.webp">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f3f3f3;
  padding:20px;
}

.cart-wrapper{
  max-width:700px;
  margin:auto;
  background:#fff;
  border-radius:12px;
  padding:20px;
}

.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #ddd;
  padding:12px 0;
}

.cart-left{
  flex:1;
}

.cart-name{
  font-weight:bold;
}

.cart-price{
  color:#666;
  font-size:14px;
}

.qty-box{
  display:flex;
  align-items:center;
  gap:8px;
}

.qty-box button{
  width:32px;
  height:32px;
  border:none;
  border-radius:6px;
  background:#eee;
  font-size:18px;
  cursor:pointer;
}

.qty-box button:hover{
  background:#ddd;
}

.item-total{
  width:90px;
  text-align:right;
  font-weight:bold;
}

.cart-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:20px;
}

.checkout-btn{
  background:#ff6600;
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:8px;
  cursor:pointer;
}

.checkout-btn:hover{
  background:#ff8800;
}
</style>
</head>

<body>

<div class="cart-wrapper">
  <h2>Shopping Cart</h2>

  <div id="cartItems"></div>

  <div class="cart-footer">
  <h3 id="cartTotal">Total: Rs.0</h3>

  <div style="display:flex; gap:10px;">
    <button id="viewMenuBtn"
      onclick="goMenu()"
      style="display:none; background:#440909; color:#ffffff; border:none; padding:10px 18px; border-radius:8px; cursor:pointer;">
      View Menu
    </button>

    <button class="checkout-btn" onclick="goBilling()">
      Checkout
    </button>
  </div>
</div>

<p id="errorMsg" style="color:red;margin-top:10px;display:none;">
  Cart empty hai. Pehle kuch add karo.
</p>
<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
const cartItems = document.getElementById("cartItems");
const cartTotal = document.getElementById("cartTotal");
const errorMsg = document.getElementById("errorMsg");
const viewMenuBtn = document.getElementById("viewMenuBtn");

function renderCart(){
  cartItems.innerHTML = "";
  let total = 0;

  if(cart.length === 0){
    cartItems.innerHTML = "<p>Cart empty hai</p>";
    cartTotal.innerText = "Total: Rs.0";
    viewMenuBtn.style.display = "inline-block";
    return;
  }

  viewMenuBtn.style.display = "none";

  cart.forEach((item, i) => {
    let itemTotal = item.price * item.qty;
    total += itemTotal;

    cartItems.innerHTML += `
      <div class="cart-item">
        <div class="cart-left">
          <div class="cart-name">${item.name}</div>
          <div class="cart-price">Rs.${item.price}</div>
        </div>

        <div class="qty-box">
          <button onclick="minusItem(${i})">âˆ’</button>
          <span>${item.qty}</span>
          <button onclick="plusItem(${i})">+</button>
        </div>

        <div class="item-total">Rs.${itemTotal}</div>
      </div>
    `;
  });

  cartTotal.innerText = "Total: Rs." + total;
  localStorage.setItem("cart", JSON.stringify(cart));
}

function plusItem(i){
  cart[i].qty++;
  renderCart();
}

function minusItem(i){
  cart[i].qty--;
  if(cart[i].qty <= 0){
    cart.splice(i, 1);
  }
  renderCart();
}

function goBilling(){
  if(cart.length === 0){
    errorMsg.style.display = "block";
    return;
  }
  window.location.href = "billing/billing.html";
}

function goMenu(){
  window.location.href = "menu.html";
}

renderCart();
</script>
<script>
function addToCart(itemName, itemPrice) {
  localStorage.setItem("checkout_item", itemName);
  localStorage.setItem("checkout_price", itemPrice);

  window.location.href = "billing/billing.html";
}
</script>
</body>

</html>
